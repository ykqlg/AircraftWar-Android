Index: app/src/main/java/com/example/testpro/MusicService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.testpro;\r\n\r\nimport android.app.Service;\r\nimport android.content.Intent;\r\nimport android.media.MediaPlayer;\r\nimport android.net.Uri;\r\nimport android.os.IBinder;\r\nimport android.util.Log;\r\n\r\nimport com.example.testpro.R;\r\n\r\nimport java.io.ByteArrayInputStream;\r\nimport java.io.DataInputStream;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\n\r\npublic class MusicService extends Service {\r\n\r\n    //创建播放器对象\r\n    private MediaPlayer player;\r\n    private boolean stopFlag = false;\r\n    private boolean isRepeat = false;\r\n    private int filename;\r\n\r\n    public MusicService() {\r\n         player = MediaPlayer.create(this,R.raw.bgm);\r\n//        this.filename = filename;\r\n    }\r\n\r\n    //播放音乐\r\n    public void playMusic(){\r\n        player.start();\r\n        if(isRepeat){\r\n            player.isLooping();\r\n        }\r\n    }\r\n\r\n    public void stopMusic(){\r\n        if (player != null) {\r\n            player.stop();\r\n            player.reset();//重置\r\n            player.release();//释放\r\n            player = null;\r\n        }\r\n    }\r\n\r\n\r\n    public void setRepeat(){\r\n        this.isRepeat = true;\r\n    }\r\n\r\n    private static final String TAG = \"MusicService\";\r\n\r\n\r\n\r\n//    public int onStartCommand(Intent intent, int flags, int startId) {\r\n//        Log.i(TAG, \"==== MusicService onStartCommand ===\");\r\n//        String action = intent.getStringExtra(\"action\");\r\n//\r\n//        if (\"play\".equals(action)) {\r\n//        //播放\r\n//            playMusic();\r\n//        } else if (\"stop\".equals(action)) {\r\n//        //停止\r\n//            stopMusic();\r\n//        }\r\n//        return super.onStartCommand(intent, flags, startId);\r\n//\r\n//    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    @Override\r\n    public void onCreate() {\r\n        super.onCreate();\r\n            Log.i(TAG, \"==== MusicService onCreate ===\");\r\n    }\r\n    @Override\r\n\r\n    public IBinder onBind(Intent intent) {\r\n        // TODO: Return the communication channel to the service.\r\n        throw new UnsupportedOperationException(\"Not yet implemented\");\r\n    }\r\n\r\n    @Override\r\n    public void onDestroy() {\r\n        super.onDestroy();\r\n        stopMusic();\r\n    }\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/testpro/MusicService.java b/app/src/main/java/com/example/testpro/MusicService.java
--- a/app/src/main/java/com/example/testpro/MusicService.java	(revision cc059252ff662c4f625ef7ccd56c331613007078)
+++ b/app/src/main/java/com/example/testpro/MusicService.java	(date 1652805659754)
@@ -2,18 +2,16 @@
 
 import android.app.Service;
 import android.content.Intent;
+import android.media.AudioManager;
 import android.media.MediaPlayer;
-import android.net.Uri;
+import android.media.SoundPool;
+import android.os.Binder;
 import android.os.IBinder;
 import android.util.Log;
 
 import com.example.testpro.R;
 
-import java.io.ByteArrayInputStream;
-import java.io.DataInputStream;
-import java.io.File;
-import java.io.IOException;
-import java.io.InputStream;
+import java.util.HashMap;
 
 public class MusicService extends Service {
 
@@ -22,18 +20,96 @@
     private boolean stopFlag = false;
     private boolean isRepeat = false;
     private int filename;
+    private static  final String TAG = "MusicService";
+    private HashMap<Integer, Integer> soundID = new HashMap<Integer, Integer>();
+    private SoundPool mSoundPool;
 
     public MusicService() {
-         player = MediaPlayer.create(this,R.raw.bgm);
-//        this.filename = filename;
-    }
-
-    //播放音乐
-    public void playMusic(){
+    }
+
+    @Override
+    public void onDestroy() {
+        super.onDestroy();
+        stopMusic();
+    }
+
+
+    @Override
+    public void onCreate() {
+        super.onCreate();
+        Log.i(TAG, "==== MusicService onCreate ===");
+        mSoundPool = new SoundPool(2, AudioManager.STREAM_SYSTEM, 5);
+        soundID.put(1, mSoundPool.load(this, R.raw.bullet_hit, 1));
+        soundID.put(2, mSoundPool.load(this, R.raw.game_over, 1));
+        soundID.put(3, mSoundPool.load(this, R.raw.bomb_explosion, 1));
+        soundID.put(4, mSoundPool.load(this, R.raw.bullet, 1));
+        soundID.put(5, mSoundPool.load(this, R.raw.get_supply, 1));
+    }
+
+    @Override
+    public IBinder onBind(Intent intent){
+//        playMusic();
+        return new MyBinder();
+    }
+
+    public class MyBinder extends Binder {
+
+        public void playBGM(){
+            BGM();
+        }
+
+        public void playBossMusic(){
+            BossMusic();
+        }
+
+        public void playBulletHit(){
+
+            mSoundPool.play(soundID.get(1), 1, 1, 0,0,1);
+        }
+
+        public void playGameOver(){
+
+            mSoundPool.play(soundID.get(2), 1, 1, 0, 0, 1);
+        }
+
+        public void playBombExplosion(){
+
+            mSoundPool.play(soundID.get(3), 1, 1, 0, 0, 1);
+        }
+
+        public void playBullet(){
+
+            mSoundPool.play(soundID.get(4), 1, 1, 0, 0, 1);
+        }
+
+        public void playGetSupply(){
+
+            mSoundPool.play(soundID.get(5), 1, 1, 0, 0, 1);
+        }
+
+
+    }
+
+
+    //播放BGM
+    public void BGM(){
+        stopMusic();
+        if(player == null){
+            player = MediaPlayer.create(this, R.raw.bgm);
+//            player.setVolume(100,100);
+            player.setLooping(true);
+        }
         player.start();
-        if(isRepeat){
-            player.isLooping();
+    }
+
+    //播放Boss音乐
+    public void BossMusic(){
+        stopMusic();
+        if(player == null){
+            player = MediaPlayer.create(this, R.raw.bgm_boss);
+            player.setLooping(true);
         }
+        player.start();
     }
 
     public void stopMusic(){
@@ -45,53 +121,12 @@
         }
     }
 
-
     public void setRepeat(){
         this.isRepeat = true;
     }
 
-    private static final String TAG = "MusicService";
-
-
-
-//    public int onStartCommand(Intent intent, int flags, int startId) {
-//        Log.i(TAG, "==== MusicService onStartCommand ===");
-//        String action = intent.getStringExtra("action");
-//
-//        if ("play".equals(action)) {
-//        //播放
-//            playMusic();
-//        } else if ("stop".equals(action)) {
-//        //停止
-//            stopMusic();
-//        }
-//        return super.onStartCommand(intent, flags, startId);
-//
-//    }
-
-
-
-
-
-
-
-
-    @Override
-    public void onCreate() {
-        super.onCreate();
-            Log.i(TAG, "==== MusicService onCreate ===");
-    }
-    @Override
-
-    public IBinder onBind(Intent intent) {
-        // TODO: Return the communication channel to the service.
-        throw new UnsupportedOperationException("Not yet implemented");
-    }
-
-    @Override
-    public void onDestroy() {
-        super.onDestroy();
-        stopMusic();
+    public int onStartCommand(Intent intent, int flags, int startId) {
+        return super.onStartCommand(intent, flags, startId);
     }
 
 
